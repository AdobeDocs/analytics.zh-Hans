---
description: 虚拟报表包中的上下文感知会话可更改 Adobe Analytics 计算移动设备访问的方式。本文介绍了后台点击处理和应用程序启动事件处理（均由 Mobile SDK 设置）对移动设备访问定义方式的影响。
title: 上下文感知会话
feature: VRS
exl-id: 5e969256-3389-434e-a989-ebfb126858ef
source-git-commit: 50f04ed366bf973fac43a29d6291afb017eb1f85
workflow-type: tm+mt
source-wordcount: '1577'
ht-degree: 24%

---

# 上下文感知会话

虚拟报表包中的上下文感知会话会更改 Adobe Analytics 计算任何设备访问次数的方式。本文还介绍了后台点击处理和应用程序启动事件处理（均由 Mobile SDK 设置）对移动设备访问定义方式的影响。

您可以采用任何所需的方式定义访问，而无需更改基础数据，以便匹配您的访客与数字体验进行交互的方式。


>[!BEGINSHADEBOX]

观看演示视频的![VideoCheckedOut](/help/assets/icons/VideoCheckedOut.svg) [上下文感知会话](https://video.tv.adobe.com/v/3428878?captions=chi_hans&quality=12&learn=on){target="_blank"}。

>[!ENDSHADEBOX]


## 客户视角URL参数

Adobe Analytics数据收集流程允许您设置指定客户观点的查询字符串参数（表示为“cp”查询字符串参数）。 此字段指定最终用户的数字应用程序的状态。 这有助于您了解点击是否是在移动设备应用程序处于后台状态时生成的。

## 后台点击处理

后台点击是指：当应用程序在后台状态下发出跟踪请求时，从Adobe Mobile SDK版本4.13.6及更高版本发送到Analytics的某种点击。 典型示例包括：

* 跨越地理围栏期间发送的数据
* 推送通知交互

以下示例概述了当虚拟报表包启用了“避免后台点击量开始一次新访问”设置或未启用该设置时，用于确定任何访客的访问何时开始和结束的逻辑。

**如果未启用“避免将后台点击计算为一次新的访问”：**

如果虚拟报表包未启用此功能，则后台点击的处理方式与任何其他点击的处理方式相同，这意味着它们会启动新的访问，并且与前台点击的处理方式相同。 例如，如果后台点击在一组前台点击之前不到30分钟（报表包的标准会话超时）发生，则后台点击是会话的一部分。

![](assets/nogood1.jpg)

如果后台点击在任何前台点击之前发生30分钟以上，则后台点击创建其自己的访问，总访问数为2。

![](assets/nogood2.jpg)

**如果启用了“避免将后台点击计算为一次新的访问”：**

以下示例说明了启用此功能时后台点击的行为。

示例 1：后台点击在一系列前台点击之前的某个时间段 (t) 发生。

![](assets/nogoodexample1.jpg)

在此示例中，如果&#x200B;*t*&#x200B;大于虚拟报表包配置的访问超时，则将从前台点击形成的访问中排除后台点击。 例如，如果虚拟报表包访问超时设置为15分钟，而&#x200B;*t*&#x200B;为20分钟，则由这一系列点击形成的访问（由绿色轮廓显示）将排除后台点击。 这意味着任何在后台点击上设置了“访问”过期时间的eVar将&#x200B;**不会**&#x200B;保留到下一次访问中，并且访问区段容器将仅包含绿色轮廓内的前台点击。

![](assets/nogoodexample1-2.jpg)

相反，如果&#x200B;*t*&#x200B;小于虚拟报表包配置的访问超时，则后台点击将作为访问的一部分包含，就像它是前台点击一样（由绿色轮廓显示）：

![](assets/nogoodexample1-3.jpg)

这意味着：

* 任何在后台点击上设置了“访问”过期时间的eVar都会将其值保留到此访问中的其他点击中。
* 在后台点击中设置的任何值都将包含在访问级别区段容器逻辑评估中。

在这两种情况下，访问总数都是1。

示例 2：如果后台点击在一系列前台点击之后发生，则行为类似：

![](assets/nogoodexample2.jpg)

如果后台点击在虚拟报表包配置的超时后发生，则后台点击不属于会话的一部分（以绿色概述）：

![](assets/nogoodexample2-1.jpg)

同样，如果时间段&#x200B;*t*&#x200B;小于虚拟报表包配置的超时，则后台点击将包含在先前前台点击形成的访问中：

![](assets/nogoodexample2-2.jpg)

这意味着：

* 对于以前前台点击，任何设置了“访问”过期时间的eVar都会将其值保留到此访问的后台点击中。
* 在后台点击中设置的任何值都将包含在访问级别区段容器逻辑评估中。

与以前一样，在这两种情况下，总访问次数都是1。

示例 3：在某些情况下，后台点击可能会导致将两次单独访问合并为一次访问。在以下场景中，后台点击前后均会出现一系列前台点击：

![](assets/nogoodexample3.jpg)

在此示例中，如果&#x200B;*t1*&#x200B;和&#x200B;*t2*&#x200B;均小于虚拟报表包配置的访问超时，则所有这些点击都将合并为单次访问，即使&#x200B;*t1*&#x200B;和&#x200B;*t2*&#x200B;一起大于访问超时也是如此：

![](assets/nogoodexample3-1.jpg)

但是，如果&#x200B;*t1*&#x200B;和&#x200B;*t2*&#x200B;大于虚拟报表包配置的超时，则这些点击将被分为两个不同的访问：

![](assets/nogoodexample3-2.jpg)

同样（与前面示例一样），如果&#x200B;*t1*&#x200B;小于超时值，而&#x200B;*t2*&#x200B;大于超时值，则后台点击将包含在首次访问中：

![](assets/nogoodexample3-3.jpg)

如果&#x200B;*t1*&#x200B;大于超时值，而&#x200B;*t2*&#x200B;小于超时值，则后台点击将包含在第二次访问中：

![](assets/nogoodexample3-4.jpg)

示例 4：如果在虚拟报表包访问超时时段内发生了一系列后台点击，则这些点击会构成一次不可见的“后台访问”，该访问不会被计入访问次数，且不能使用访问分段容器进行访问。

![](assets/nogoodexample4.jpg)

即使该点击不被视为一次访问，任何设有访问过期时间的 eVar 都会将其值保留到此次“后台访问”的其他后台点击中。

示例 5：如果在一系列前台点击之后连续发生多次后台点击，则根据超时时间设置，这些后台点击可能会保留访问一直处于活动状态，且保留时间长于访问超时时段。例如，如果&#x200B;*t1*&#x200B;和&#x200B;*t2*&#x200B;加总大于虚拟报表包访问超时，但单独小于超时，则访问仍会扩展以包含这两个后台点击：

![](assets/nogoodexample5.jpg)

同样，如果在一系列前台事件之前发生一系列后台点击，则会发生类似行为：

![](assets/nogoodexample5-1.jpg)

后台点击量的行为可保留在后台点击期间设置的eVar或其他变量所产生的任何归因效果。 这允许将下游前台转化事件归因于应用程序处于后台状态时执行的操作。 它还允许访问区段容器包含导致下游前台会话的后台点击，这对于衡量推送消息的有效性很有用。

## 访问量度行为

访问计数仅基于至少包含一次前台点击的访问计数。 这意味着任何孤立的后台点击或“后台访问”都不会计入访问量度。

## 每次访问逗留时间量度行为

系统仍会使用点击之间的时间来计算逗留时间，其方式与不采用后台点击的方式类似。 但是，如果访问包含后台点击（因为这些点击的发生距离前台点击足够近），则这些点击将包含在每次访问逗留时间计算中，就像它们是前台点击一样。

## 后台点击处理设置

由于后台点击处理仅适用于使用报表时间处理 的虚拟报表包，因此 Adobe Analytics 支持两种后台点击处理方式，以便将访问计数保留在不使用报表时间处理的基础报表包中。要访问此设置，请导航至Adobe Analytics管理工具，导航至适用的基础报表包的设置，然后导航至“移动设备管理”菜单，最后导航至“移动设备应用程序报表”子菜单。

1. “旧版处理开启”：这是所有报表包的默认设置。 就非报表时间归因基础报表包而言，将遗留处理保留在会将后台点击作为我们处理管道中的正常点击进行处理。 这意味着基础报表包中显示的任何后台点击都会以正常点击的形式增加访问次数。 如果您不希望基础报表包中显示后台点击，请将此设置更改为“关闭”。
1. “旧版处理功能关闭”：如果对后台点击旧版处理功能关闭，则任何发送到基础报表包的后台点击都将被基础报表包忽略，并且仅当在此基础报表包上创建的虚拟报表包配置为使用报表时间处理时才可访问。 这意味着由发送到此基础报表包的后台点击捕获的任何数据仅显示在启用报表时间处理的虚拟报表包中。

   此设置适用于希望利用新的后台点击处理的客户，而不更改其基础报表包的访问计数。

在任一情况下，后台点击的计费方式与发送到Analytics的任何其他点击的费用相同。

## 每次应用程序启动后开始的新访问次数

除了后台点击处理之外，虚拟报表包还可以在 Mobile SDK 发送应用程序启动事件时强制开始一次新访问。启用此设置后，每当从SDK发送应用程序启动事件时，它都会强制开始一次新访问，而不管打开的访问是否已达到其超时。 包含应用程序启动事件的点击将作为下次访问中的首次点击，递增访问计数，并创建一个单独的访问容器进行分段。
