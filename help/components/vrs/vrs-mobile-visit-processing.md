---
description: 虚拟报表包中的上下文感知会话可更改 Adobe Analytics 计算移动设备访问的方式。本文介绍了后台点击处理和应用程序启动事件处理（均由 Mobile SDK 设置）对移动设备访问定义方式的影响。
title: 上下文感知会话
uuid: d354864a-9163-4970-a3a0-f2e9729bdbe3
translation-type: tm+mt
source-git-commit: 3997889ae72920d719203edbb159b55b983158e7

---


# 上下文感知会话

虚拟报告套件中的上下文感知会话会更改Adobe Analytics计算来自任何设备的访问的方式。 本文还描述了后台点击和应用程序启动事件（两者均由移动SDK设置）对定义移动访问的处理含义。

您可以随意定义访问，而无需更改基础数据，以匹配访客与数字体验的交互方式。

## 客户透视URL参数

Adobe Analytics数据收集过程允许您设置一个查询字符串参数，该参数指定客户透视(表示为“cp”查询字符串参数)。 此字段指定最终用户的数字应用程序的状态。 这有助于您了解在移动应用程序处于后台状态时是否生成了点击。

## 后台点击处理

后台点击是当应用程序在后台状态中发出跟踪请求时，从Adobe Mobile SDK版本4.13.6及更高版本发送到Analytics的一种点击类型。 典型示例包括：

* 在地理围栏穿越期间发送的数据
* 推送通知交互

以下示例概述了在虚拟报告套件中启用或未启用“防止后台点击开始新的访问”设置时确定访问开始何时结束以及任何访客结束时所使用的逻辑。

**如果未启用“避免将后台点击计算为一次新的访问”：**

如果未为虚拟报表包启用此功能，则后台点击会被视为与任何其他点击相同的点击，这意味着它们会开始新访问，并且其操作与前台点击相同。 例如，如果在一组前台点击之前，后台点击发生时间不到30分钟（报表包的标准会话超时），则后台点击是会话的一部分。

![](assets/nogood1.jpg)

如果后台点击在任何前台点击之前超过30分钟发生，则后台点击会创建其自己的访问，总访问次数为2。

![](assets/nogood2.jpg)

**如果启用了“避免将后台点击计算为一次新的访问”：**

以下示例说明了启用此功能时后台点击的行为。

示例 1：后台点击在一系列前台点击之前的某个时间段 (t) 发生。

![](assets/nogoodexample1.jpg)

在此示例中，如果 *t大于虚拟报表包配置的访问超时* ，则后台点击将从前台点击形成的访问中排除。 例如，如果虚拟报表包访问超时设置为15分钟， *t* 为20分钟，则由此系列点击（由绿色轮廓显示）形成的访问将排除后台点击。 这意味着，在后台点击时设置“访问”到期的任何eVar都不会持续到下 **一次访问** ，并且访问区段容器将仅包含绿色轮廓内的前景点击。

![](assets/nogoodexample1-2.jpg)

相反，如 *果t小于* 虚拟报表包配置的访问超时，则后台点击将作为访问的一部分包含在其中，就像它是前台点击一样（由绿色轮廓显示）:

![](assets/nogoodexample1-3.jpg)

这意味着：

* 在后台点击时设置为“访问”过期的任何eVar将其值保留到此次访问中的其他点击中。
* 在后台点击中设置的任何值都包括在访问级别区段容器逻辑评估中。

在这两种情况下，总访问次数都为1。

示例 2：如果后台点击在一系列前台点击之后发生，则行为类似：

![](assets/nogoodexample2.jpg)

如果在虚拟报告套件的配置超时后发生后台点击，则后台点击不是会话的一部分（以绿色列出）:

![](assets/nogoodexample2-1.jpg)

同样，如果时间段 *t* 小于虚拟报表包的配置超时，则后台点击将包括在由先前前台点击形成的访问中：

![](assets/nogoodexample2-2.jpg)

这意味着：

* 在以前的前台点击中设置为“访问”到期的任何eVar将其值保留到此次访问的后台点击中。
* 在后台点击中设置的任何值都包括在访问级别区段容器逻辑评估中。

与以前一样，无论哪种情况，访问总数都为1。

示例 3：在某些情况下，后台点击可能会导致将两次单独访问合并为一次访问。在以下场景中，后台点击前面和后面是一系列前台点击：

![](assets/nogoodexample3.jpg)

在本示例中，如果 *t1* 和 *t2* 都小于虚拟报表包配置的访问超时，则所有这些点击都将合并为单次访问，即使 *t1和*** t2总计大于访问超时：

![](assets/nogoodexample3-1.jpg)

但是，如果 *t1和t2* 大于虚拟报表包配置的超时 ** ，这些点击将分为两个不同的访问：

![](assets/nogoodexample3-2.jpg)

同样（如前面的示例所示），如果 *t1* 小于超时， *t2* 小于超时，则首次访问中将包含后台点击：

![](assets/nogoodexample3-3.jpg)

如 *果t1* 大于超时， *t2* 小于超时，则第二次访问将包括后台点击：

![](assets/nogoodexample3-4.jpg)

示例 4：如果在虚拟报表包访问超时时段内发生了一系列后台点击，则这些点击会构成一次不可见的“后台访问”，该访问不会被计入访问次数，且不能使用访问分段容器进行访问。

![](assets/nogoodexample4.jpg)

即使该点击不被视为一次访问，任何设有访问过期时间的 eVar 都会将其值保留到此次“后台访问”的其他后台点击中。

示例 5：如果在一系列前台点击之后连续发生多次后台点击，则根据超时时间设置，这些后台点击可能会保留访问一直处于活动状态，且保留时间长于访问超时时段。例如，如果 *t1* 和 *t2* 加起来大于虚拟报表包访问超时，但单独小于超时，则访问仍会扩展以包含两个后台点击：

![](assets/nogoodexample5.jpg)

同样，如果一系列前景事件之前发生了一系列背景点击，则会发生类似的行为：

![](assets/nogoodexample5-1.jpg)

后台点击的行为方式是这样的，以便保留来自eVar或在后台点击过程中设置的其他变量的任何归因效果。 这允许将下游前景转换事件归因于应用程序处于后台状态时执行的操作。 它还允许访问段容器包含后台点击，这些后台点击导致下游前台会话，这对测量推送消息的有效性很有用。

## 访问量度行为

访问计数仅基于包含至少一个前台点击的访问计数。 这意味着任何孤立的后台点击或“后台访问”不计入访问量度。

## 每次访问的停留时间度量行为

使用两次点击之间的时间，花费的时间仍以类似方式计算，即在没有后台点击的情况下计算。 但是，如果某次访问包含后台点击（因为这些点击与前台点击的距离足够近），则这些点击会被包括在每次访问的花费时间计算中，就像它们是前台点击一样。

## 后台点击处理设置

由于后台点击处理仅适用于使用报表时间处理 的虚拟报表包，因此 Adobe Analytics 支持两种后台点击处理方式，以便将访问计数保留在不使用报表时间处理的基础报表包中。要访问此设置，请导航到Adobe Analytics Admin Console，转到适用的基本报表包的设置，然后导航到“移动管理”菜单，再导航到“移动应用程序报告”子菜单。

1. “旧版处理开启”:这是所有报表包的默认设置。 就非报告时间归因基础报表包而言，将传统处理保留在处理流程中的后台点击作为正常点击。 这意味着，基本报表包中显示的任何后台点击都会将访问作为正常点击增加。 如果不希望在基本报表包中显示后台点击，请将此设置更改为“关闭”。
1. “旧版处理关闭”:在对后台点击的传统处理关闭的情况下，发送到基础报表包的任何后台点击将被基本报表包忽略，并且只有在将在此基础报表包上创建的虚拟报表包配置为使用“报表时间处理”时，才可访问。 这意味着由发送到此基本报表包的后台点击捕获的任何数据都只显示在启用了“报告时间处理”的虚拟报表包中。

   此设置适用于希望利用新的后台点击处理而不更改基本报表包的访问计数的客户。

无论哪种情况，后台点击的计费成本均与发送到Analytics的任何其他点击相同。

## 每次启动应用程序时开始新访问

除了后台点击处理之外，虚拟报表包还可以在 Mobile SDK 发送应用程序启动事件时强制开始一次新访问。启用此设置后，每当从SDK发送应用程序启动事件时，都会强制对开始进行新访问，而不管打开的访问是否已达到超时。 包含应用程序启动事件的点击将作为下一次访问中的第一次点击，并增加访问计数并为细分创建不同的访问容器。
