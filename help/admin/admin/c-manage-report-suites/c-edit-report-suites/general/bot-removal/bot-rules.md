---
description: 使用机器人规则，您可以从报表包中删除已知蜘蛛程序和机器人程序生成的流量。删除机器人流量可更准确地衡量您网站上的用户活动。
title: 了解和配置机器人规则
feature: Bot Removal
role: Admin
exl-id: 1c0009f6-2746-4ef1-8dcb-e2693617e91e
source-git-commit: d7a6867796f97f8a14cd8a3cfad115923b329c7c
workflow-type: tm+mt
source-wordcount: '1668'
ht-degree: 68%

---

# 了解和配置机器人规则

机器人规则允许您从由已知蜘蛛程序和机器人生成的报表包中删除流量。删除机器人流量可更准确地衡量您网站上的用户活动。

定义机器人规则之后，所有传入的流量会与定义的规则进行比较。报告包中不会收集符合这些规则的流量，并且不会包括在流量量度中。

删除机器人程序流量通常会减少流量和转化量度。许多客户发现，删除机器人流量会导致转化率提高，并导致其他可用性量度增加。

机器人流量数据存储在单独的存储库中，以便在机器人和机器人页面报表中显示。

>[!NOTE]
>
>Adobe Experience PlatformEdge Network提供[机器人检测服务](https://experienceleague.adobe.com/docs/experience-platform/datastreams/bot-detection.html?lang=zh-Hans)，该服务将识别为来自机器人的点击标记为机器人点击。 Adobe Analytics中使用的机器人检测过程是单独的，不会引用通过Edge Network到达的数据中包含的机器人分数。 但是，两个系统使用相同的IAB机器人列表。

## 更新或上传机器人规则

>[!IMPORTANT]
>
>在删除机器人程序流量之前，请与利益关系人进行交流以确保做出此更改后他们会对关键性能指标做出必要的调整。如有可能，我们建议您首先从小型报表包中删除机器人程序流量以评估潜在的影响。


>[!BEGINSHADEBOX]

请参阅![VideoCheckedOut](/help/assets/icons/VideoCheckedOut.svg) [为演示视频配置机器人规则](https://video.tv.adobe.com/v/335738/?quality=12){target="_blank"}。

>[!ENDSHADEBOX]


要更新或上载机器人规则，请执行以下操作：

1. 转到&#x200B;**[!UICONTROL Analytics]** > **[!UICONTROL 管理员]** > **[!UICONTROL 报表包]**。

1. 选择要更新机器人规则的报表包，然后选择&#x200B;**[!UICONTROL 编辑设置]** > **[!UICONTROL 常规]** > **[!UICONTROL 机器人规则]**。

1. 使用以下任意选项更新或上传报表包的机器人规则：

   * 选择&#x200B;[!UICONTROL **启用IAB机器人过滤规则**]&#x200B;以删除IAB(国际Advertising局)的国际蜘蛛程序和机器人列表中的机器人，从而删除机器人流量。

     我们建议您至少选择此选项。

     有关详细信息，请参阅下面的[标准IAB机器人规则](#standard-iab-bot-rules)部分。

   * 选择&#x200B;[!UICONTROL **添加规则**]&#x200B;以根据用户代理、IP地址或IP范围定义和添加自定义机器人规则。

     有关详细信息，请参阅下面的部分，[自定义机器人规则](#custom-bot-rules)。

   * 在&#x200B;[!UICONTROL **选择要导入的CSV机器人文件**]&#x200B;区域旁边，选择&#x200B;[!UICONTROL **选择文件**]，然后选择用于定义机器人规则的CSV文件。

     有关详细信息，请参阅下面的[上载机器人规则](#upload-bot-rules)部分。

1. 选择&#x200B;[!UICONTROL **保存**]。

## 标准 IAB 机器人规则

可以通过选中[!UICONTROL 启用 IAB 机器人过滤规则]复选框来打开标准 IAB 机器人规则。此选择将删除 IAB（国际广告局）的国际蜘蛛程序与机器人列表中的机器人，从而删除机器人流量。Adobe 每月从 IAB 更新此列表。

![](/help/admin/admin/c-manage-report-suites/c-edit-report-suites/general/bot-removal/assets/bot-iab-checkbox.png)

Adobe 无法向客户提供详细的 IAB 机器人程序列表，但是您可以使用“机器人报表”来查看访问您网站的机器人程序的列表。要将机器人提交至 IAB 列表，请访问 [IAB](https://www.iab.com)。

有关如何启用报表包中标准IAB机器人规则的信息，请参阅[更新或上载机器人规则](#update-or-upload-bot-rules)。

## 自定义机器人规则

>[!NOTE]
>
>用户界面允许手动定义 500 个规则。在达到此限制后，必须通过“导入文件”和“导出机器人规则”选项对规则进行批量管理。

自定义机器人规则允许您根据定义的条件过滤流量。 要开始启用报表包中自定义机器人规则的过程，请参阅[更新或上载机器人规则](#update-or-upload-bot-rules)。

可使用以下条件类型定义自定义机器人规则：

* 用户代理
* IP 地址
* IP 范围

单个规则可定义多个条件。多个条件可使用“OR”进行匹配。例如，如果您提供“用户代理”和“IP 地址”的值，则满足任一条件时，该流量将被视为机器人程序流量。

### 用户代理

用户代理条件会检查用户代理值以确定它是以指定的字符串&#x200B;**[!UICONTROL 开头]**&#x200B;还是&#x200B;**[!UICONTROL 包含]**&#x200B;指定的字符串。如果选择&#x200B;**[!UICONTROL 包含]**，则在用户代理中出现该字符串时将会匹配子字符串。

**[!UICONTROL 不包含]**&#x200B;列表中可包含可选值，以定义用户代理进行成功匹配不得包含的值。通过在每行包含一个值，可指定多个值。如果用户代理满足在匹配字符串中指定的标准，但同时包含“不包含”列表中的字符串，则可将其视为匹配。

**[!UICONTROL 包含]**&#x200B;字段限制为 100 个字符。“不包含”列表限制为 255 个字符，在减去每个新行中的一个分隔符（分隔符数等于字符串的数量减 1。如果指定4 *不包含*&#x200B;字符串，则需要3个分隔符。) 所有字符串匹配均不区分大小写。

### IP 地址（包含通配符匹配）

使用通配符 (&#42;) 在同一代码块中匹配一个或多个 IP 地址。提供您要匹配的 IP 地址的数值。使用通配符替代要匹配的任何值的 &#42;。以下列表包含 IP 地址匹配字符串的示例：

```
10.10.10.1
10.10.10.*
```

### IP 地址范围

提供要匹配的 IP 地址的起始和终止范围。使用通配符替代要匹配的任何值的 &#42;。

### 定义自定义机器人规则

1. 转到 **[!UICONTROL Analytics]** > **[!UICONTROL 管理员]**，选择一个或多个报表包并单击&#x200B;**[!UICONTROL 常规]** > **[!UICONTROL 机器人规则]**。
1. 单击&#x200B;**[!UICONTROL 添加规则]**&#x200B;并定义一个或多个匹配条件。
1. 单击&#x200B;**[!UICONTROL 保存]**。此更改应在 30 分钟内生效。

## 上载机器人规则

若要批量导入机器人规则，您可以上载定义规则的 CSV 文件。

1. 要开始将机器人规则上载到报表包的过程，请参阅[更新或上载机器人规则](#update-or-upload-bot-rules)。

1. 创建一个CSV文件，该文件在电子表格的第1行中具有以下列，并且按照显示的顺序：

   | 列1，行1 | 列2，行1 | 列3，行1 | 列4，行1 | 列5，行1 | 列6，行1 |
   |--- |--- |---|---|---|---|
   | 机器人名称 | IP开始 | 终止 IP | 规则<br>（包含或开头为）</br> | 用户代理包括 | 用户代理排除<br>（255个字符限制）</br> |

   您可以定义三种类型的机器人规则：

   * 用户代理包含或开头
   * 单个 IP 地址或通配符匹配
   * IP 范围匹配

   导入文件中的每行都可以包含唯一一个下列机器人定义：

   >[!NOTE]
   >
   >   若要使用通过 OR 连接的规则组合（例如，用户代理或 IP 地址）与机器人进行匹配，请在机器人名称字段中为所有要组合的规则提供相同的名称。不支持 AND 匹配。


   * **用户代理包含或开头**：提供单个用户代理字符串与“代理包含”列中的内容进行匹配。通过在“代理匹配规则”字段中置入&#x200B;*包含*&#x200B;或&#x200B;*开头*，指定您想要执行的匹配类型。“代理排除”列中可包含可选值，该可选值可定义“代理”不包含的一个或多个用竖线分隔 ( `|` ) 的字符串。字符串匹配区分大小写。“起始 IP”和“终止 IP”列都必须为空。

   * **单个 IP 地址或通配符匹配**：要匹配单个 IP 地址 (`10.10.10.1`) 或通配符 IP 地址 (`10.10.*.*`)，请在“起始 IP”和“终止 IP”列中放置相同的值。“匹配规则”、“代理包含”和“代理排除”都必须为空。

   * **IP 范围匹配**：使用“起始 IP”和“终止 IP”列来定义 IP 地址的范围。可使用通配符来匹配 IP 范围，例如 `10.10.10.*` 到 `10.10.20.*`。“匹配规则”、“代理包含”和“代理排除”都必须为空。

1. 在报表包管理器的“机器人规则”页面的&#x200B;[!UICONTROL **选择要导入的CSV机器人文件**]&#x200B;区域旁边，选择&#x200B;[!UICONTROL **选择文件**]，然后选择用于定义要导入的机器人规则的CSV文件。

1. （可选）选中&#x200B;**[!UICONTROL 覆盖现有规则]**&#x200B;复选框可删除所有现有规则，并使用上载文件中定义的规则替换现有规则。

1. 选择&#x200B;[!UICONTROL **导入文件**]。

1. 在&#x200B;[!UICONTROL **规则集**]&#x200B;区域，查看导入的规则。

1. 选择&#x200B;[!UICONTROL **保存**]。

## 导出机器人规则

要将用户界面中定义的所有规则导出为CSV格式，请执行以下操作：

1. 转到&#x200B;**[!UICONTROL Analytics]** > **[!UICONTROL 管理员]** > **[!UICONTROL 报表包]**。

1. 选择包含要导出的机器人规则的报表包，然后选择&#x200B;**[!UICONTROL 编辑设置]** > **[!UICONTROL 常规]** > **[!UICONTROL 机器人规则]**。

1. 选择&#x200B;**[!UICONTROL 导出机器人规则]**，然后将CSV文件保存到您的文件系统。

## 机器人规则对数据收集的影响 {#section_F01A3130E7A04A9993371CF26F6586F2}

机器人规则可应用到所有分析数据。机器人规则删除的数据仅在“机器人”和“机器人页面”报表中可见。

先应用机器人规则，然后应用 VISTA 规则。请参阅《技术说明用户指南》中的[处理顺序](/help/technotes/processing-order.md)。

**高点击访问处理：**&#x200B;如果一次访问中出现 100 次以上的点击，则报表会确定访问时间（以秒为单位）是否小于或等于访问的点击次数。在这种情况下，由于长时间集中访问的处理成本原因，报表会重新开始一个新访问。高点击访问通常是由机器人攻击造成的，因此不视为正常的访客浏览。

>[!NOTE]
>
>标记为 *`bots`* 的点击将计为[服务器调用。](/help/admin/admin/c-server-call-usage/overage-overview.md)

## IP 模糊处理对机器人过滤的影响 {#section_92E60B95BE8940D983F28C79E0CD6B12}

IAB 机器人列表完全基于用户代理，因此基于该列表的过滤不受 IP 模糊设置影响。对于非 IAB 机器人过滤（自定义规则），IP 可能为过滤标准的一部分。如果过滤机器人使用 IP，则在启用该设置的情况下，机器人过滤发生于最后八位字节已被删除之后，但又在其他 IP 模糊处理选项之前，例如删除整个 IP 或将它替换为某些唯一 ID。

如果启用了 IP 模糊处理，则在 IP 地址被模糊处理之前会发生 IP 排除，这样客户就无需在启用 IP 模糊处理时更改任何内容。

如果删除了最后八位字节，则该操作是在 IP 过滤之前完成的。这样，最后八位字节将被替换为 0，并且应当更新 IP 排除规则以匹配末尾为 0 的 IP 地址。匹配 &#42; 应匹配 0。
